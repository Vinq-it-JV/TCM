<?xml version="1.0" encoding="utf-8"?>
<database name="default" defaultIdMethod="native" namespace='UserBundle\Model'>
    <table name='user'>
        <column name='id' type='integer' primaryKey='true' autoIncrement='true' />
        <column name='username' type='varchar' size='255' />
        <column name='firstname' type='varchar' size='255' />
        <column name='lastname' type='varchar' size='255'/>
        <column name='email' type='varchar' size='255'/>
        <column name='password' type='varchar' size='255'/>
        <column name='secret' type='varchar' size='255'/>
        <column name='logins' type='integer' default='3'/>
        <column name='language' type='varchar' size='5' default='en'/>
        <column name='is_enabled' type='boolean' default='true'/>
        <column name='is_external' type='boolean' default='false'/>
        <column name='is_locked' type='boolean' default='false'/>
        <column name='is_expired' type='boolean' default='false'/>
        <behavior name="timestampable" />
    </table>

    <table name='role'>
        <column name='id' type='integer' primaryKey='true' autoIncrement='true'/>
        <column name='name' type='varchar' size='255' />
        <column name='description' type='varchar' size='255' />
        <behavior name="timestampable" />
    </table>

    <table name='user_role' isCrossRef="true">
        <column name='id' type='integer' autoIncrement='true' primaryKey='true' />
        <column name='user_id' type='integer' />
        <column name='role_id' type='integer' />
        <foreign-key foreignTable='user' onDelete="CASCADE">
            <reference local='user_id' foreign='id'/>
        </foreign-key>
        <foreign-key foreignTable='role'>
            <reference local='role_id' foreign='id'/>
        </foreign-key>
    </table>
</database>
